language: cpp

addons:
  apt:
    packages:
    - libgtk-3-dev
    - libenet-dev

    # sfml
    - libxrandr-dev
    - libudev-dev
    - libopenal-dev
    - libflac-dev
    - libvorbis-dev

script:
  # Generate cmake
  - cmake -S . -B build $CMAKE_FLAGS -DCMAKE_INSTALL_PREFIX=install -DBUILD_DEMO=ON -DSFML_DEPENDENCIES_INSTALL_PREFIX=install

  #Â build
  - cmake --build build --target install

matrix:
  include:
    - name: "Linux gcc Dynamic"
      os: linux
      dist: focal
      compiler: gcc
  
    - name: "Linux gcc Static"
      os: linux
      dist: focal
      compiler: gcc
      env:
        - CMAKE_FLAGS="-DBUILD_SHARED_LIBS=FALSE"

    - name: "Linux clang Dynamic"
      os: linux
      dist: focal
      compiler: clang

    - name: "Linux clang Static"
      os: linux
      dist: focal
      compiler: clang
      env:
        - CMAKE_FLAGS="-DBUILD_SHARED_LIBS=FALSE"

    - name: "macOS Xcode 11.6 Dynamic"
      os: osx
      osx_image: xcode11.6

    - name: "macOS Xcode 11.6 Static"
      os: osx
      osx_image: xcode11.6
      env:
       - CMAKE_FLAGS="-DBUILD_SHARED_LIBS=FALSE"

    - name: "Visual Studio Dynamic"
      os: windows

    - name: "Visual Studio Static"
      os: windows
      env:
        - CMAKE_FLAGS="-DBUILD_SHARED_LIBS=FALSE"

notifications:
  email: false
